<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guess The Link</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .game-container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      text-align: center;
      max-width: 800px;
      width: 100%;
      display: none; /* hidden until JSON loads */
    }
    h1 {
      margin-bottom: 20px;
      color: #6b6bff;
    }
    .clues {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
      position: relative;
    }
    .clue {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .clues img {
      width: 180px;
      height: 180px;
      object-fit: cover;
      border-radius: 10px;
      border: 2px solid #ccc;
      position: relative;
    }
    .word {
      margin-top: 8px;
      font-size: 1.1em;
      font-weight: bold;
      color: #333;
      display: none;
    }
    .link-overlay {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.7);
      color: white;
      font-size: 2em;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 10px;
      display: none;
    }
    input {
      padding: 10px;
      font-size: 1em;
      width: 80%;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      padding: 10px 18px;
      margin: 5px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #6b6bff;
      color: white;
      font-weight: bold;
      transition: 0.2s;
    }
    button:hover {
      background: #4f4fff;
    }
    .result {
      margin-top: 20px;
      font-size: 2em;
      font-weight: bold;
    }
    .correct {
      color: green;
    }
    .wrong {
      color: red;
      font-size: 3em;
    }

    /* Loading Screen */
    .loading-screen {
      font-size: 1.5em;
      color: #444;
      text-align: center;
    }
    .spinner {
      margin: 20px auto;
      width: 40px;
      height: 40px;
      border: 5px solid #ddd;
      border-top: 5px solid #6b6bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% {transform: rotate(0deg);}
      100% {transform: rotate(360deg);}
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div class="loading-screen" id="loading">
    <div class="spinner"></div>
    Loading game, please wait...
  </div>

  <!-- Game -->
  <div class="game-container" id="game">
    <h1>üéÆ Guess The Link</h1>
    <div class="clues" id="clues"></div>
    <div class="link-overlay" id="linkOverlay"></div>
    <input type="text" id="answer" placeholder="Type your guess...">
    <br>
    <button onclick="checkAnswer()">Submit</button>
    <button onclick="revealAnswer()">Reveal</button>
    <button onclick="nextRound()">Next ‚û°</button>
    <button onclick="goHome()">üè† Home</button>
    <div class="result" id="result"></div>
  </div>

  <script>
    let rounds = [];
    let currentRound = 0;

    // Load JSON from GitHub
    async function loadRounds() {
      try {
        const response = await fetch("https://raw.githubusercontent.com/SourabhSK15/Sourabh-SK/main/data/rounds.json");
        rounds = await response.json();
        document.getElementById("loading").style.display = "none";
        document.getElementById("game").style.display = "block";
        loadRound();
      } catch (error) {
        console.error("Error loading rounds:", error);
        document.getElementById("loading").innerText = "‚ö†Ô∏è Could not load game data. Check your JSON link.";
      }
    }

    function loadRound() {
      const cluesDiv = document.getElementById("clues");
      cluesDiv.innerHTML = "";
      document.getElementById("result").innerText = "";
      document.getElementById("answer").value = "";
      document.getElementById("linkOverlay").style.display = "none";

      rounds[currentRound].images.forEach(imgObj => {
        let clueDiv = document.createElement("div");
        clueDiv.className = "clue";

        let imageEl = document.createElement("img");
        imageEl.src = imgObj.src;

        let wordEl = document.createElement("div");
        wordEl.className = "word";
        wordEl.innerText = imgObj.word;

        clueDiv.appendChild(imageEl);
        clueDiv.appendChild(wordEl);
        cluesDiv.appendChild(clueDiv);
      });
    }

    function checkAnswer() {
      const userAnswer = document.getElementById("answer").value.trim().toLowerCase();
      const correctAnswer = rounds[currentRound].answer.toLowerCase();

      if (userAnswer.includes(correctAnswer)) {
        showSolution();
        document.getElementById("result").innerHTML = "‚úÖ Correct!";
        document.getElementById("result").className = "result correct";
      } else {
        document.getElementById("result").innerHTML = "‚ùå";
        document.getElementById("result").className = "result wrong";
      }
    }

    function revealAnswer() {
      showSolution();
    }

    function showSolution() {
      document.querySelectorAll(".word").forEach(el => el.style.display = "block");
      const overlay = document.getElementById("linkOverlay");
      overlay.innerText = rounds[currentRound].answer;
      overlay.style.display = "block";
    }

    function nextRound() {
      currentRound++;
      if (currentRound >= rounds.length) {
        alert("üéâ Game Over! You've completed all rounds.");
        currentRound = 0;
      }
      loadRound();
    }

    function goHome() {
      window.location.href = "index.html";
    }

    // Start game
    loadRounds();
  </script>
</body>
</html>
